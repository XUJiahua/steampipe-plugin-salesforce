# Salesforce Authentication Configuration
# ========================================
# This plugin supports 4 authentication methods with the following precedence:
#   1. Access Token (highest priority)
#   2. Refresh Token (OAuth Authorization Code Flow)
#   3. JWT Bearer Flow
#   4. Username/Password (lowest priority)
#
# Only configure ONE method. If multiple are set, higher priority method is used.

# =============================================================================
# REQUIRED FOR ALL METHODS
# =============================================================================

# Your Salesforce instance URL
# - Production: https://yourcompany.my.salesforce.com
# - Sandbox: https://yourcompany--sandbox.sandbox.my.salesforce.com
# - Developer Edition: https://yourcompany-dev-ed.develop.my.salesforce.com
SALESFORCE_URL=https://your-instance.my.salesforce.com

# =============================================================================
# METHOD 1: Access Token (Recommended for quick testing)
# =============================================================================
# Use a pre-obtained OAuth access token.
#
# How to obtain:
#   1. Install Salesforce CLI: npm install -g @salesforce/cli
#   2. Login: sf org login web --instance-url $SALESFORCE_URL --alias myorg
#   3. Get token: sf org display --target-org myorg --json | jq -r '.result.accessToken'
#
# Note: Tokens expire (typically 2 hours). Re-run step 3 to get a new token.

# SALESFORCE_ACCESS_TOKEN=00Dxxxx...your_access_token_here

# =============================================================================
# METHOD 2: Refresh Token (OAuth Authorization Code Flow)
# =============================================================================
# Uses a refresh_token obtained from the OAuth Authorization Code flow.
# The refresh_token is long-lived (default: never expires) and is used to
# automatically obtain new access_tokens when they expire.
#
# How to obtain a refresh_token:
#   1. Create a Connected App in Salesforce (see JWT section for steps)
#      - Callback URL must be a real URL your server can receive
#      - Do NOT enable "Use digital signatures"
#      - Note the Consumer Key (client_id) and Consumer Secret (client_secret)
#
#   2. Use Salesforce CLI to get a refresh_token:
#      sf org login web --instance-url $SALESFORCE_URL --alias myorg --client-id $CLIENT_ID
#
#   3. Extract the refresh token:
#      sf org display --target-org myorg --verbose --json | jq -r '.result.refreshToken'
#
#   Or use curl manually:
#      Open in browser:
#        https://login.salesforce.com/services/oauth2/authorize?response_type=code&client_id=$CLIENT_ID&redirect_uri=$CALLBACK_URL&scope=api%20refresh_token
#      After login, exchange the authorization code:
#        curl -X POST https://login.salesforce.com/services/oauth2/token \
#          -d "grant_type=authorization_code&code=$CODE&client_id=$CLIENT_ID&client_secret=$CLIENT_SECRET&redirect_uri=$CALLBACK_URL"

# SALESFORCE_CLIENT_ID=3MVG9...your_consumer_key_here
# SALESFORCE_CLIENT_SECRET=your_consumer_secret_here
# SALESFORCE_REFRESH_TOKEN=5Aep...your_refresh_token_here

# =============================================================================
# METHOD 3: JWT Bearer Flow (Recommended for production/automation)
# =============================================================================
# Server-to-server authentication using X.509 certificate.
# No user interaction required after initial setup.
#
# Setup steps:
#   1. Generate RSA key pair:
#      openssl genrsa -out server.key 2048
#      openssl req -new -x509 -key server.key -out server.crt -days 365
#
#   2. Create Connected App in Salesforce:
#      - Setup > App Manager > New Connected App
#      - Enable OAuth Settings
#      - Callback URL: https://localhost/callback (not used but required)
#      - Select OAuth Scopes: "Manage user data via APIs (api)", "Perform requests at any time (refresh_token, offline_access)"
#      - Enable "Use digital signatures" and upload server.crt
#      - Save and wait 2-10 minutes for activation
#
#   3. Authorize the Connected App:
#      - Setup > App Manager > find your app > Manage
#      - Edit Policies > Permitted Users: "Admin approved users are pre-authorized"
#      - Save
#      - Scroll to Profiles section > Manage Profiles > add "System Administrator"
#
#   4. Get Consumer Key:
#      - Setup > App Manager > find your app > View
#      - Copy "Consumer Key" value

# Consumer Key from Connected App (this is the client_id)
# SALESFORCE_CLIENT_ID=3MVG9...your_consumer_key_here

# Username of the Salesforce user to authenticate as
# SALESFORCE_USERNAME=your.email@example.com

# Private key - choose ONE of these options:
# Option A: Path to PEM file
# SALESFORCE_PRIVATE_KEY_FILE=/path/to/server.key

# Option B: Inline PEM string (useful for environment variables in CI/CD)
# SALESFORCE_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----\nMIIE...base64...\n-----END RSA PRIVATE KEY-----"

# =============================================================================
# METHOD 4: Username/Password (Legacy, not recommended)
# =============================================================================
# Direct username/password authentication.
# Salesforce is deprecating this method. Use JWT or Access Token instead.
#
# How to obtain security token:
#   - Salesforce > Settings > My Personal Information > Reset My Security Token
#   - Token will be sent to your email

# SALESFORCE_USERNAME=your.email@example.com
# SALESFORCE_PASSWORD=your_password
# SALESFORCE_TOKEN=your_security_token

# =============================================================================
# OPTIONAL SETTINGS
# =============================================================================

# Custom OAuth client ID (default: "steampipe")
# SALESFORCE_CLIENT_ID=your_custom_client_id

# API version (default: latest supported by simpleforce)
# SALESFORCE_API_VERSION=v58.0
